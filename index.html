<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>–ú–æ—è –∫–∞—Ä—Ç–∞ + –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è + —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–π –≤–∏–¥</title>
  <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
  <style>
    html, body { width:100%; height:100%; margin:0; padding:0; }
    #map { width:100%; height:100vh; }
    #controls {
      position:absolute; top:10px; left:10px;
      background:white; padding:8px 12px;
      border-radius:10px; box-shadow:0 2px 6px rgba(0,0,0,0.3);
      font-family:sans-serif;
      z-index:999;
    }
    button {
      margin:3px;
      cursor:pointer;
      padding:6px 10px;
      border:none;
      border-radius:6px;
      background:#f0f0f0;
      transition:background .2s;
    }
    button:hover { background:#ddd; }
  </style>
</head>
<body>
  <div id="map"></div>

  <div id="controls">
    <button id="normalBtn">–û–±—ã—á–Ω–∞—è –∫–∞—Ä—Ç–∞</button>
    <button id="satBtn">–°–ø—É—Ç–Ω–∏–∫</button>
    <button id="hybridBtn">–ì–∏–±—Ä–∏–¥</button>
    <button id="locateBtn">üìç –ú–æ—è –ª–æ–∫–∞—Ü–∏—è</button>
  </div>

  <script>
    ymaps.ready(init);
    let map, userPlacemark;

    function init() {
      const startCenter = [42.875964, 74.603701]; 
      map = new ymaps.Map("map", {
        center: startCenter,
        zoom: 12,
        type: 'yandex#map',
        controls: ['zoomControl']
      });


      document.getElementById('normalBtn').onclick = () => map.setType('yandex#map');
      document.getElementById('satBtn').onclick = () => map.setType('yandex#satellite');
      document.getElementById('hybridBtn').onclick = () => map.setType('yandex#hybrid');
      document.getElementById('locateBtn').onclick = locateUser;


      locateUser();
    }


    function locateUser() {
      if (!navigator.geolocation) {
        alert("–í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é");
        return;
      }

      navigator.geolocation.getCurrentPosition(
        pos => {
          const coords = [pos.coords.latitude, pos.coords.longitude];

          if (userPlacemark) {
            userPlacemark.geometry.setCoordinates(coords);
          } else {
            userPlacemark = new ymaps.Placemark(coords, {
              hintContent: '–í—ã –∑–¥–µ—Å—å',
              balloonContent: '–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ'
            }, {
              preset: 'islands#blueCircleDotIcon'
            });
            map.geoObjects.add(userPlacemark);
          }

          map.setCenter(coords, 15);
        },
        err => {
          let msg = "–û—à–∏–±–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è";
          if (err.code === 1) msg = "–î–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–µ—â—ë–Ω.";
          else if (err.code === 2) msg = "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.";
          else if (err.code === 3) msg = "–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è.";
          alert(msg);
        },
        { enableHighAccuracy: true, timeout: 10000, maximumAge: 0 }
      );
    }
  </script>
</body>
</html>
